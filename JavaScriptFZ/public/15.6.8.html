<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Ajax实例</title>
  <link rel="stylesheet" href="">
  <script type="text/javascript">
  <!--
    // 定义一个变量，用于存放XMLHttpRequest对象
    var xmlHttp;
    // 定义一个用于创建XMLHttpRequest对象的函数
    function createXMLHttpRequest () {
      if (window.ActiveXObject) {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        console.log("IE win");
      }else if (window.XMLHttpRequest) {
        xmlHttp = new XMLHttpRequest();
        console.log("Netscape win");
      }
    }

    // 响应HTTP请求状态变化的函数
    function httpStateChange () {
      //判断异步调用是否完成
      if (xmlHttp.readyState == 4) {
        console.log("异步调用完成");
        //判断异步调用是否成功，如果成功则开始局部更新数据
        if (xmlHttp.status == 200 || xmlHttp.status == 0) {
          console.log("异步调用成功");
          //查找节点
          var node = document.getElementById("myDiv");
          console.log("查找到节点"+node);
          //更新数据
          node.firstChild.nodeValue = xmlHttp.responseText;
          console.log("数据更新"+node.firstChild.nodeValue);
        }else{
          //如果异步调用未成功，弹出警告框，并显示出错信息
          alert("异步调用出错\n返回的HTTP状态码为: "+xmlHttp.status+"\n送回HTTP状态信息为: "+xmlHttp.statusText());
        }
      }
    }

    // 异步调用服务器端数据
    function getData () {
      // 创建XMLHttpRequest对象
      createXMLHttpRequest();
      if (xmlHttp != null) {
        // 创建HTTP请求
        xmlHttp.open("get", "ajax.txt",true);
        console.log("创建HTTP请求成功");
        // 设置响应HTTP请求变化的函数
        xmlHttp.onreadystatechange = httpStateChange;
        console.log("设置请求变化函数成功");
        // 发送请求
        xmlHttp.send(null);
        console.log("发送请求成功");
      };
    }
  -->
  </script>
</head>
<body>
  <div id="myDiv">原数据</div>
  <input type="button" name="" value="更新数据" onclick="getData()">
</body>
</html>